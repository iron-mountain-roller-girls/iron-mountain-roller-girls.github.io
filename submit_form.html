<?php
require_once 'swiftmail/swift_required.php';

// Create the Transport
$transport = Swift_SmtpTransport::newInstance('smtp.zoho.com', 465, 'ssl')
  ->setUsername('general@ironmountainrollergirls.com')
  ->setPassword('s!srocks')
  ;

$result = false;

try {
    // Create the Mailer using your created Transport
    $mailer = Swift_Mailer::newInstance($transport);
    
    // Create a message
    $message = Swift_Message::newInstance('Contact Message:'.(!empty($_POST['subject']) ? $_POST['subject']:''))
      ->setFrom(array('webinfo@ironmountainrollergirls.com' => (!empty($_POST['name']) ? $_POST['name']:'')))
      ->setTo(array('general@ironmountainrollergirls.com'))
      ->setBody((!empty($_POST['email']) ? $_POST['email']:'')."\n\n".(!empty($_POST['comment']) ? $_POST['comment']:''))
      ;
    
    
    $result = $mailer->send($message);
} catch (Exception $e) {
    $result = false;
}

if ($result) {
    header("Location: contact.php?message=Your message has been sent successfully.");
} else {
    header("Location: contact.php?message=Your message could not be sent. Please try again.");
}

exit;